{\rtf1\ansi\ansicpg1252\cocoartf1561\cocoasubrtf400
{\fonttbl\f0\fnil\fcharset0 Menlo-Regular;\f1\fswiss\fcharset0 Helvetica;\f2\fnil\fcharset0 Menlo-Bold;
}
{\colortbl;\red255\green255\blue255;\red0\green0\blue0;\red255\green255\blue255;\red170\green13\blue145;
\red92\green38\blue153;\red196\green26\blue22;\red0\green116\blue0;\red46\green13\blue110;\red63\green110\blue116;
\red28\green0\blue207;\red38\green71\blue75;}
{\*\expandedcolortbl;;\csgenericrgb\c0\c0\c0;\csgray\c100000;\csgenericrgb\c66500\c5200\c56900;
\csgenericrgb\c35900\c14900\c60100;\csgenericrgb\c77000\c10200\c8600;\csgenericrgb\c0\c45600\c0;\csgenericrgb\c18100\c5200\c43100;\csgenericrgb\c24700\c43100\c45600;
\csgenericrgb\c11000\c0\c81000;\csgenericrgb\c14900\c27800\c29400;}
\margl1440\margr1440\vieww18000\viewh12680\viewkind0
\deftab543
\pard\tx543\pardeftab543\pardirnatural\partightenfactor0

\f0\fs22 \cf2 \cb3 TEST SUCCESSFUL: Processing order that cannot currently make a transaction\
\
\pard\tx543\pardeftab543\pardirnatural\partightenfactor0
\cf4 int\cf2  main()\{
\f1\fs24 \cf0 \
\
\pard\tx543\pardeftab543\pardirnatural\partightenfactor0

\f0\fs22 \cf2     
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf5 ifstream\cf2  read_data(\cf6 "/Users/thomasciha/Documents/2nd Year/CS 275/IBM_Trades_N_Quotes.csv"\cf2 ); \cf7 // note: there are 1353590 lines
\f1\fs24 \cf0 \

\f0\fs22 \cf2     
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf5 string\cf2  line;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf8 getline\cf2 (read_data,line); \cf7 //get header, throw it out
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf4 class\cf2  \cf9 ECN\cf2  Test_ECN(\cf6 "ECN1"\cf2 );
\f1\fs24 \cf0 \

\f0\fs22 \cf2     
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf4 int\cf2  count = \cf10 0\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf4 while\cf2 (count < \cf10 1010\cf2  && \cf8 getline\cf2 (read_data, line))\{
\f1\fs24 \cf0 \

\f0\fs22 \cf2         \cf9 Offer\cf2  temp = \cf11 create_offer\cf2 (line);
\f1\fs24 \cf0 \

\f0\fs22 \cf2         \cf4 if\cf2 (count >= \cf10 1000\cf2  && temp.\cf9 Price\cf2  > \cf10 0\cf2 )
\f1\fs24 \cf0 \

\f0\fs22 \cf2             Test_ECN.\cf11 ParseOffer\cf2 (temp);
\f1\fs24 \cf0 \

\f0\fs22 \cf2         count +=\cf10 1\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \}
\f1\fs24 \cf0 \

\f0\fs22 \cf2     
\f1\fs24 \cf0 \
\

\f0\fs22 \cf2     \cf5 cout\cf2  << \cf6 "CURRENT BIDS: "\cf2  << \cf8 endl\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     Test_ECN.\cf9 market\cf2 .\cf11 Print_Offers\cf2 (\cf11 Bid\cf2 );
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf5 cout\cf2  << \cf6 "CURRENT ASKS: "\cf2  << \cf8 endl\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     Test_ECN.\cf9 market\cf2 .\cf11 Print_Offers\cf2 (\cf11 Ask\cf2 );
\f1\fs24 \cf0 \
\

\f0\fs22 \cf2     
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf7 // creating sample order to test system:
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf9 Order\cf2  sample_order(\cf10 1\cf2 ,\cf10 2\cf2 , \cf10 500\cf2 , \cf11 Stock\cf2 , \cf6 "IBM"\cf2 , \cf5 milliseconds\cf2 (\cf10 500\cf2 ), \cf11 Limit\cf2 , \cf11 Day\cf2 , \cf11 Buy\cf2 , \cf10 153.2\cf2 );
\f1\fs24 \cf0 \
\

\f0\fs22 \cf2     \cf5 vector\cf2 <\cf4 class\cf2  \cf9 ECN\cf2 > OMS_Initializer;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     OMS_Initializer.\cf8 push_back\cf2 (Test_ECN);
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf9 OMS\cf2  my_broker(OMS_Initializer);
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf9 order_info\cf2  temp_info = my_broker.\cf11 ProcessOrder\cf2 (sample_order);
\f1\fs24 \cf0 \

\f0\fs22 \cf2     temp_info.\cf11 Print\cf2 ();
\f1\fs24 \cf0 \

\f0\fs22 \cf2     
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf5 cout\cf2  << \cf6 "CURRENT BIDS: "\cf2  << \cf8 endl\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     my_broker.\cf9 available_ECNs\cf2 .\cf8 begin\cf2 ()->\cf9 market\cf2 .\cf11 Print_Offers\cf2 (\cf11 Bid\cf2 );
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf5 cout\cf2  << \cf6 "CURRENT ASKS: "\cf2  << \cf8 endl\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     my_broker.\cf9 available_ECNs\cf2 .\cf8 begin\cf2 ()->\cf9 market\cf2 .\cf11 Print_Offers\cf2 (\cf11 Ask\cf2 );
\f1\fs24 \cf0 \

\f0\fs22 \cf2     
\f1\fs24 \cf0 \

\f0\fs22 \cf2     read_data.\cf8 close\cf2 ();
\f1\fs24 \cf0 \
\

\f0\fs22 \cf2 \}\
\
\
OUTPUT:\
\
\pard\tx543\pardeftab543\pardirnatural\partightenfactor0

\f2\b \cf2 \cb1 \CocoaLigature0 CURRENT BIDS: (BEFORE ADDING OFFER)\
-------------------------------\
| 153.18    200       21184837|\
-------------------------------\
-------------------------------\
| 153.18    400       21184843|\
-------------------------------\
-------------------------------\
| 153.18    200       21185137|\
-------------------------------\
-------------------------------\
| 153.18    400       21185143|\
-------------------------------\
-------------------------------\
| 153.18    300       21185148|\
-------------------------------\
\
\
CURRENT ASKS: \
-------------------------------\
| 156.01    400       21184837|\
-------------------------------\
-------------------------------\
| 156.01    400       21184843|\
-------------------------------\
-------------------------------\
| 156.01    400       21185137|\
-------------------------------\
-------------------------------\
| 156.01    400       21185143|\
-------------------------------\
-------------------------------\
| 156.01    400       21185148|\
-------------------------------\
\
\
Avg Price: -1\
Shares Filled: 0\
Order Status: Pending\
\
CURRENT BIDS: (AFTER ADDING OFFER)\
-------------------------------\
| 153.2    500            500|\
-------------------------------\
-------------------------------\
| 153.18    200       21184837|\
-------------------------------\
-------------------------------\
| 153.18    400       21184843|\
-------------------------------\
-------------------------------\
| 153.18    200       21185137|\
-------------------------------\
-------------------------------\
| 153.18    400       21185143|\
-------------------------------\
-------------------------------\
| 153.18    300       21185148|\
-------------------------------\
\
\
CURRENT ASKS: \
-------------------------------\
| 156.01    400       21184837|\
-------------------------------\
-------------------------------\
| 156.01    400       21184843|\
-------------------------------\
-------------------------------\
| 156.01    400       21185137|\
-------------------------------\
-------------------------------\
| 156.01    400       21185143|\
-------------------------------\
-------------------------------\
| 156.01    400       21185148|\
-------------------------------\
\
\
Program ended with exit code: 0\
\
\

\f0\b0 TRANSACTION WITH A MARKET ORDER BEING FILLED 
\f2\b \
\
\pard\tx543\pardeftab543\pardirnatural\partightenfactor0

\f0\b0 \cf4 \cb3 \CocoaLigature1 int\cf2  main()\{
\f1\fs24 \cf0 \
\pard\tx543\pardeftab543\pardirnatural\partightenfactor0

\f0\fs22 \cf2     
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf5 ifstream\cf2  read_data(\cf6 "/Users/thomasciha/Documents/2nd Year/CS 275/IBM_Trades_N_Quotes.csv"\cf2 ); \cf7 // note: there are 1353590 lines
\f1\fs24 \cf0 \

\f0\fs22 \cf2     
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf5 string\cf2  line;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf8 getline\cf2 (read_data,line); \cf7 //get header, throw it out
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf4 class\cf2  \cf9 ECN\cf2  Test_ECN(\cf6 "ECN1"\cf2 );
\f1\fs24 \cf0 \

\f0\fs22 \cf2     
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf4 int\cf2  count = \cf10 0\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf4 while\cf2 (count < \cf10 1010\cf2  && \cf8 getline\cf2 (read_data, line))\{
\f1\fs24 \cf0 \

\f0\fs22 \cf2         \cf9 Offer\cf2  temp = \cf11 create_offer\cf2 (line);
\f1\fs24 \cf0 \

\f0\fs22 \cf2         \cf4 if\cf2 (count >= \cf10 1000\cf2  && temp.\cf9 Price\cf2  > \cf10 0\cf2 )
\f1\fs24 \cf0 \

\f0\fs22 \cf2             Test_ECN.\cf11 ParseOffer\cf2 (temp);
\f1\fs24 \cf0 \

\f0\fs22 \cf2         count +=\cf10 1\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \}
\f1\fs24 \cf0 \

\f0\fs22 \cf2    
\f1\fs24 \cf0 \

\f0\fs22 \cf2     
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf7 // creating sample order to test system:
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf9 Order\cf2  sample_order(\cf10 1\cf2 ,\cf10 2\cf2 , \cf10 1000\cf2 , \cf11 Stock\cf2 , \cf6 "IBM"\cf2 , \cf5 milliseconds\cf2 (\cf10 500\cf2 ), \cf11 Limit\cf2 , \cf11 Day\cf2 , \cf11 Buy\cf2 , \cf10 157\cf2 );
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf9 Order\cf2  sample_ask(\cf10 2\cf2 ,\cf10 3\cf2 , \cf10 500\cf2 , \cf11 Stock\cf2 , \cf6 "IBM"\cf2 , \cf5 milliseconds\cf2 (\cf10 500\cf2 ), \cf11 Limit\cf2 , \cf11 Day\cf2 , \cf11 Sell\cf2 , \cf10 155.87\cf2 );
\f1\fs24 \cf0 \
\

\f0\fs22 \cf2     \cf5 vector\cf2 <\cf4 class\cf2  \cf9 ECN\cf2 > OMS_Initializer;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     OMS_Initializer.\cf8 push_back\cf2 (Test_ECN) \cf7 // testing with 1 ECN 
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf9 OMS\cf2  my_broker(OMS_Initializer);
\f1\fs24 \cf0 \

\f0\fs22 \cf2     
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf7 //adding sample_ask
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf9 order_info\cf2  temp_info = my_broker.\cf11 ProcessOrder\cf2 (sample_ask);
\f1\fs24 \cf0 \

\f0\fs22 \cf2     temp_info.\cf11 Print\cf2 ();
\f1\fs24 \cf0 \
\

\f0\fs22 \cf2     \cf5 cout\cf2  << \cf6 "CURRENT BIDS: "\cf2  << \cf8 endl\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     Test_ECN.\cf9 market\cf2 .\cf11 Print_Offers\cf2 (\cf11 Bid\cf2 );
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf5 cout\cf2  << \cf6 "CURRENT ASKS: "\cf2  << \cf8 endl\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     Test_ECN.\cf9 market\cf2 .\cf11 Print_Offers\cf2 (\cf11 Ask\cf2 );
\f1\fs24 \cf0 \

\f0\fs22 \cf2     
\f1\fs24 \cf0 \

\f0\fs22 \cf2     temp_info = my_broker.\cf11 ProcessOrder\cf2 (sample_order);
\f1\fs24 \cf0 \

\f0\fs22 \cf2     temp_info.\cf11 Print\cf2 ();
\f1\fs24 \cf0 \

\f0\fs22 \cf2     
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf5 cout\cf2  << \cf6 "CURRENT BIDS: "\cf2  << \cf8 endl\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     my_broker.\cf9 available_ECNs\cf2 .\cf8 begin\cf2 ()->\cf9 market\cf2 .\cf11 Print_Offers\cf2 (\cf11 Bid\cf2 );
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf5 cout\cf2  << \cf6 "CURRENT ASKS: "\cf2  << \cf8 endl\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     my_broker.\cf9 available_ECNs\cf2 .\cf8 begin\cf2 ()->\cf9 market\cf2 .\cf11 Print_Offers\cf2 (\cf11 Ask\cf2 );
\f1\fs24 \cf0 \

\f0\fs22 \cf2     
\f1\fs24 \cf0 \

\f0\fs22 \cf2     read_data.\cf8 close\cf2 ();
\f1\fs24 \cf0 \
\
\

\f0\fs22 \cf2 \}
\f2\b \cb1 \CocoaLigature0 \
\
\
Avg Price: -1\
Shares Filled: 0\
Order Status: Pending\
\
CURRENT BIDS: (BEFORE ADDING OFFER)\
-------------------------------\
| 153.18    200       21184837|\
-------------------------------\
-------------------------------\
| 153.18    400       21184843|\
-------------------------------\
-------------------------------\
| 153.18    200       21185137|\
-------------------------------\
-------------------------------\
| 153.18    400       21185143|\
-------------------------------\
-------------------------------\
| 153.18    300       21185148|\
-------------------------------\
\
\
CURRENT ASKS: (BEFORE ADDING OFFER)\
-------------------------------\
| 156.01    400       21184837|\
-------------------------------\
-------------------------------\
| 156.01    400       21184843|\
-------------------------------\
-------------------------------\
| 156.01    400       21185137|\
-------------------------------\
-------------------------------\
| 156.01    400       21185143|\
-------------------------------\
-------------------------------\
| 156.01    400       21185148|\
-------------------------------\
\
\
Avg Price: 155.94\
Shares Filled: 1000\
Order Status: Filled\
\
CURRENT BIDS: (AFTER ADDING OFFER)\
-------------------------------\
| 153.18    200       21184837|\
-------------------------------\
-------------------------------\
| 153.18    400       21184843|\
-------------------------------\
-------------------------------\
| 153.18    200       21185137|\
-------------------------------\
-------------------------------\
| 153.18    400       21185143|\
-------------------------------\
-------------------------------\
| 153.18    300       21185148|\
-------------------------------\
\
\
CURRENT ASKS: \
-------------------------------\
| 156.01    300       21184843|\
-------------------------------\
-------------------------------\
| 156.01    400       21185137|\
-------------------------------\
-------------------------------\
| 156.01    400       21185143|\
-------------------------------\
-------------------------------\
| 156.01    400       21185148|\
-------------------------------\
\
\
Program ended with exit code: 0\
\
\
\
\
\pard\tx543\pardeftab543\pardirnatural\partightenfactor0

\f0\b0 \cf2 Processing a Market order with numerous bids and asks:
\f2\b \
\
\
\
\pard\tx543\pardeftab543\pardirnatural\partightenfactor0

\f0\b0 \cf4 \cb3 \CocoaLigature1 int\cf2  main()\{
\f1\fs24 \cf0 \
\pard\tx543\pardeftab543\pardirnatural\partightenfactor0

\f0\fs22 \cf2     \cf7 //    vector<stock> Broker_Inventory; // use this to add inventory into hash table of OMS constructor (still need to write hash function)
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf7 //create a login function that prompts the user for username and password which then searches the appropriate table in Oracle via a SQL query
\f1\fs24 \cf0 \

\f0\fs22 \cf2     
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf5 ifstream\cf2  read_data(\cf6 "/Users/thomasciha/Documents/2nd Year/CS 275/IBM_Trades_N_Quotes.csv"\cf2 ); \cf7 // note: there are 1353590 lines
\f1\fs24 \cf0 \

\f0\fs22 \cf2     
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf5 string\cf2  line;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf8 getline\cf2 (read_data,line); \cf7 //get header, throw it out
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf4 class\cf2  \cf9 ECN\cf2  Test_ECN(\cf6 "ECN1"\cf2 );
\f1\fs24 \cf0 \

\f0\fs22 \cf2     
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf4 int\cf2  count = \cf10 0\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf4 while\cf2 (count < \cf10 500100\cf2  && \cf8 getline\cf2 (read_data, line))\{
\f1\fs24 \cf0 \

\f0\fs22 \cf2         \cf9 Offer\cf2  temp = \cf11 create_offer\cf2 (line);
\f1\fs24 \cf0 \

\f0\fs22 \cf2         \cf4 if\cf2 (count >= \cf10 500000\cf2  && temp.\cf9 Price\cf2  > \cf10 0\cf2 )
\f1\fs24 \cf0 \

\f0\fs22 \cf2             Test_ECN.\cf11 ParseOffer\cf2 (temp);
\f1\fs24 \cf0 \

\f0\fs22 \cf2         count +=\cf10 1\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \}
\f1\fs24 \cf0 \

\f0\fs22 \cf2     
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf5 cout\cf2  << Test_ECN.\cf9 market\cf2 .\cf9 current_bids\cf2 .\cf8 size\cf2 () << \cf8 endl\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf5 cout\cf2  << Test_ECN.\cf9 market\cf2 .\cf9 current_asks\cf2 .\cf8 size\cf2 () << \cf8 endl\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf7 // creating sample order to test system:
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf9 Order\cf2  sample_order(\cf10 1\cf2 ,\cf10 2\cf2 , \cf10 1000\cf2 , \cf11 Stock\cf2 , \cf6 "IBM"\cf2 , \cf5 milliseconds\cf2 (\cf10 500\cf2 ), \cf11 Market\cf2 , \cf11 Day\cf2 , \cf11 Buy\cf2 , \cf10 0\cf2 );
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf9 Order\cf2  sample_ask(\cf10 2\cf2 ,\cf10 3\cf2 , \cf10 500\cf2 , \cf11 Stock\cf2 , \cf6 "IBM"\cf2 , \cf5 milliseconds\cf2 (\cf10 500\cf2 ), \cf11 Market\cf2 , \cf11 Day\cf2 , \cf11 Sell\cf2 , \cf10 0\cf2 );
\f1\fs24 \cf0 \

\f0\fs22 \cf2     
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf5 vector\cf2 <\cf4 class\cf2  \cf9 ECN\cf2 > OMS_Initializer;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     OMS_Initializer.\cf8 push_back\cf2 (Test_ECN);
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf9 OMS\cf2  my_broker(OMS_Initializer);
\f1\fs24 \cf0 \

\f0\fs22 \cf2     
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf7 //adding sample_ask
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf9 order_info\cf2  temp_info = my_broker.\cf11 ProcessOrder\cf2 (sample_ask);
\f1\fs24 \cf0 \

\f0\fs22 \cf2     temp_info.\cf11 Print\cf2 ();
\f1\fs24 \cf0 \
\

\f0\fs22 \cf2     \cf5 cout\cf2  << \cf6 "CURRENT BIDS: "\cf2  << \cf8 endl\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     Test_ECN.\cf9 market\cf2 .\cf11 Print_Offers\cf2 (\cf11 Bid\cf2 );
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf5 cout\cf2  << \cf6 "CURRENT ASKS: "\cf2  << \cf8 endl\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     Test_ECN.\cf9 market\cf2 .\cf11 Print_Offers\cf2 (\cf11 Ask\cf2 );
\f1\fs24 \cf0 \

\f0\fs22 \cf2     
\f1\fs24 \cf0 \

\f0\fs22 \cf2     temp_info = my_broker.\cf11 ProcessOrder\cf2 (sample_order);
\f1\fs24 \cf0 \

\f0\fs22 \cf2     temp_info.\cf11 Print\cf2 ();
\f1\fs24 \cf0 \

\f0\fs22 \cf2     
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf5 cout\cf2  << \cf6 "CURRENT BIDS: "\cf2  << \cf8 endl\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     my_broker.\cf9 available_ECNs\cf2 .\cf8 begin\cf2 ()->\cf9 market\cf2 .\cf11 Print_Offers\cf2 (\cf11 Bid\cf2 );
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf5 cout\cf2  << \cf6 "CURRENT ASKS: "\cf2  << \cf8 endl\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     my_broker.\cf9 available_ECNs\cf2 .\cf8 begin\cf2 ()->\cf9 market\cf2 .\cf11 Print_Offers\cf2 (\cf11 Ask\cf2 );
\f1\fs24 \cf0 \

\f0\fs22 \cf2     
\f1\fs24 \cf0 \

\f0\fs22 \cf2     read_data.\cf8 close\cf2 ();
\f1\fs24 \cf0 \
\
\

\f0\fs22 \cf2 \}
\f1\fs24 \cf0 \
\
\pard\tx543\pardeftab543\pardirnatural\partightenfactor0

\f2\b\fs22 \cf2 \cb1 \CocoaLigature0 \
OUTPUT: \
\
48\
49\
Avg Price: 153.39\
Shares Filled: 500\
Order Status: Filled\
\
CURRENT BIDS: AFTER THE FIRST ORDER FILLED\
-------------------------------\
| 153.39    100       43437859|\
-------------------------------\
-------------------------------\
| 153.39    100       43437860|\
-------------------------------\
-------------------------------\
| 153.39    100       43438576|\
-------------------------------\
-------------------------------\
| 153.39    100       43438576|\
-------------------------------\
-------------------------------\
| 153.39    200       43438577|\
-------------------------------\
-------------------------------\
| 153.39    200       43438577|\
-------------------------------\
-------------------------------\
| 153.39    100       43438577|\
-------------------------------\
-------------------------------\
| 153.39    200       43438577|\
-------------------------------\
-------------------------------\
| 153.39    200       43438577|\
-------------------------------\
-------------------------------\
| 153.39    200       43438577|\
-------------------------------\
-------------------------------\
| 153.39    100       43438578|\
-------------------------------\
-------------------------------\
| 153.39    100       43438580|\
-------------------------------\
-------------------------------\
| 153.39    100       43438581|\
-------------------------------\
-------------------------------\
| 153.39    200       43438582|\
-------------------------------\
-------------------------------\
| 153.39    100       43438582|\
-------------------------------\
-------------------------------\
| 153.39    100       43438690|\
-------------------------------\
-------------------------------\
| 153.39    200       43438690|\
-------------------------------\
-------------------------------\
| 153.39    100       43438690|\
-------------------------------\
-------------------------------\
| 153.39    100       43438732|\
-------------------------------\
-------------------------------\
| 153.39    200       43438732|\
-------------------------------\
-------------------------------\
| 153.39    200       43438732|\
-------------------------------\
-------------------------------\
| 153.38    100       43438285|\
-------------------------------\
-------------------------------\
| 153.38    100       43438573|\
-------------------------------\
-------------------------------\
| 153.38    100       43438573|\
-------------------------------\
-------------------------------\
| 153.38    100       43438574|\
-------------------------------\
-------------------------------\
| 153.38    200       43438576|\
-------------------------------\
-------------------------------\
| 153.38    100       43438580|\
-------------------------------\
-------------------------------\
| 153.38    200       43438726|\
-------------------------------\
-------------------------------\
| 153.38    200       43438733|\
-------------------------------\
-------------------------------\
| 153.37    200       43438017|\
-------------------------------\
-------------------------------\
| 153.37    100       43438142|\
-------------------------------\
-------------------------------\
| 153.37    100       43438573|\
-------------------------------\
-------------------------------\
| 153.37    100       43438573|\
-------------------------------\
-------------------------------\
| 153.37    100       43438573|\
-------------------------------\
-------------------------------\
| 153.37    200       43438577|\
-------------------------------\
-------------------------------\
| 153.37    200       43438577|\
-------------------------------\
-------------------------------\
| 153.31    100       43438726|\
-------------------------------\
-------------------------------\
| 153.29    100       43438284|\
-------------------------------\
-------------------------------\
| 153.28    200       43438575|\
-------------------------------\
-------------------------------\
| 153.28    200       43438591|\
-------------------------------\
-------------------------------\
| 153.27    100       43438284|\
-------------------------------\
-------------------------------\
| 153.26    100       43437971|\
-------------------------------\
-------------------------------\
| 153.26    100       43438285|\
-------------------------------\
-------------------------------\
| 153.26    100       43438285|\
-------------------------------\
-------------------------------\
| 153.26    100       43438579|\
-------------------------------\
-------------------------------\
| 153.24    400       43438285|\
-------------------------------\
-------------------------------\
| 153.24    400       43438285|\
-------------------------------\
-------------------------------\
| 153.24    400       43438586|\
-------------------------------\
\
\
CURRENT ASKS: \
-------------------------------\
| 153.54   7600       43437892|\
-------------------------------\
-------------------------------\
| 153.42    100       43437860|\
-------------------------------\
-------------------------------\
| 153.42    100       43438017|\
-------------------------------\
-------------------------------\
| 153.42    100       43438142|\
-------------------------------\
-------------------------------\
| 153.42    100       43438285|\
-------------------------------\
-------------------------------\
| 153.42    100       43438573|\
-------------------------------\
-------------------------------\
| 153.42    100       43438573|\
-------------------------------\
-------------------------------\
| 153.42    200       43438577|\
-------------------------------\
-------------------------------\
| 153.42    200       43438577|\
-------------------------------\
-------------------------------\
| 153.42    100       43438577|\
-------------------------------\
-------------------------------\
| 153.42    300       43438577|\
-------------------------------\
-------------------------------\
| 153.42    300       43438577|\
-------------------------------\
-------------------------------\
| 153.42    200       43438690|\
-------------------------------\
-------------------------------\
| 153.43    100       43437859|\
-------------------------------\
-------------------------------\
| 153.43    100       43438573|\
-------------------------------\
-------------------------------\
| 153.43    100       43438576|\
-------------------------------\
-------------------------------\
| 153.43    100       43438726|\
-------------------------------\
-------------------------------\
| 153.44    500       43438578|\
-------------------------------\
-------------------------------\
| 153.44    100       43438582|\
-------------------------------\
-------------------------------\
| 153.44    100       43438582|\
-------------------------------\
-------------------------------\
| 153.44    100       43438732|\
-------------------------------\
-------------------------------\
| 153.45    700       43438285|\
-------------------------------\
-------------------------------\
| 153.45    100       43438285|\
-------------------------------\
-------------------------------\
| 153.45    400       43438577|\
-------------------------------\
-------------------------------\
| 153.45    100       43438579|\
-------------------------------\
-------------------------------\
| 153.45    100       43438581|\
-------------------------------\
-------------------------------\
| 153.45    100       43438726|\
-------------------------------\
-------------------------------\
| 153.45    100       43438732|\
-------------------------------\
-------------------------------\
| 153.46    100       43438285|\
-------------------------------\
-------------------------------\
| 153.46    600       43438577|\
-------------------------------\
-------------------------------\
| 153.46    600       43438580|\
-------------------------------\
-------------------------------\
| 153.46    100       43438586|\
-------------------------------\
-------------------------------\
| 153.47    600       43437971|\
-------------------------------\
-------------------------------\
| 153.47    100       43438284|\
-------------------------------\
-------------------------------\
| 153.47    100       43438284|\
-------------------------------\
-------------------------------\
| 153.47    100       43438285|\
-------------------------------\
-------------------------------\
| 153.47    200       43438733|\
-------------------------------\
-------------------------------\
| 153.49    500       43438575|\
-------------------------------\
-------------------------------\
| 153.49    500       43438580|\
-------------------------------\
-------------------------------\
| 153.49    500       43438591|\
-------------------------------\
-------------------------------\
| 153.49    500       43438690|\
-------------------------------\
-------------------------------\
| 153.51    100       43438573|\
-------------------------------\
-------------------------------\
| 153.51    100       43438573|\
-------------------------------\
-------------------------------\
| 153.51    100       43438574|\
-------------------------------\
-------------------------------\
| 153.51    100       43438576|\
-------------------------------\
-------------------------------\
| 153.51    100       43438576|\
-------------------------------\
-------------------------------\
| 153.51    100       43438577|\
-------------------------------\
-------------------------------\
| 153.51    100       43438690|\
-------------------------------\
-------------------------------\
| 153.51    100       43438732|\
-------------------------------\
\
\
Avg Price: 153.54\
Shares Filled: 1000\
Order Status: Filled\
\
\
CURRENT BIDS: \
-------------------------------\
| 153.39    100       43438577|\
-------------------------------\
-------------------------------\
| 153.39    200       43438577|\
-------------------------------\
-------------------------------\
| 153.39    100       43438577|\
-------------------------------\
-------------------------------\
| 153.39    200       43438577|\
-------------------------------\
-------------------------------\
| 153.39    200       43438577|\
-------------------------------\
-------------------------------\
| 153.39    200       43438577|\
-------------------------------\
-------------------------------\
| 153.39    100       43438578|\
-------------------------------\
-------------------------------\
| 153.39    100       43438580|\
-------------------------------\
-------------------------------\
| 153.39    100       43438581|\
-------------------------------\
-------------------------------\
| 153.39    200       43438582|\
-------------------------------\
-------------------------------\
| 153.39    100       43438582|\
-------------------------------\
-------------------------------\
| 153.39    100       43438690|\
-------------------------------\
-------------------------------\
| 153.39    200       43438690|\
-------------------------------\
-------------------------------\
| 153.39    100       43438690|\
-------------------------------\
-------------------------------\
| 153.39    100       43438732|\
-------------------------------\
-------------------------------\
| 153.39    200       43438732|\
-------------------------------\
-------------------------------\
| 153.39    200       43438732|\
-------------------------------\
-------------------------------\
| 153.38    100       43438285|\
-------------------------------\
-------------------------------\
| 153.38    100       43438573|\
-------------------------------\
-------------------------------\
| 153.38    100       43438573|\
-------------------------------\
-------------------------------\
| 153.38    100       43438574|\
-------------------------------\
-------------------------------\
| 153.38    200       43438576|\
-------------------------------\
-------------------------------\
| 153.38    100       43438580|\
-------------------------------\
-------------------------------\
| 153.38    200       43438726|\
-------------------------------\
-------------------------------\
| 153.38    200       43438733|\
-------------------------------\
-------------------------------\
| 153.37    200       43438017|\
-------------------------------\
-------------------------------\
| 153.37    100       43438142|\
-------------------------------\
-------------------------------\
| 153.37    100       43438573|\
-------------------------------\
-------------------------------\
| 153.37    100       43438573|\
-------------------------------\
-------------------------------\
| 153.37    100       43438573|\
-------------------------------\
-------------------------------\
| 153.37    200       43438577|\
-------------------------------\
-------------------------------\
| 153.37    200       43438577|\
-------------------------------\
-------------------------------\
| 153.31    100       43438726|\
-------------------------------\
-------------------------------\
| 153.29    100       43438284|\
-------------------------------\
-------------------------------\
| 153.28    200       43438575|\
-------------------------------\
-------------------------------\
| 153.28    200       43438591|\
-------------------------------\
-------------------------------\
| 153.27    100       43438284|\
-------------------------------\
-------------------------------\
| 153.26    100       43437971|\
-------------------------------\
-------------------------------\
| 153.26    100       43438285|\
-------------------------------\
-------------------------------\
| 153.26    100       43438285|\
-------------------------------\
-------------------------------\
| 153.26    100       43438579|\
-------------------------------\
-------------------------------\
| 153.24    400       43438285|\
-------------------------------\
-------------------------------\
| 153.24    400       43438285|\
-------------------------------\
-------------------------------\
| 153.24    400       43438586|\
-------------------------------\
\
\
CURRENT ASKS: \
-------------------------------\
| 153.54   6600       43437892|\
-------------------------------\
-------------------------------\
| 153.42    100       43437860|\
-------------------------------\
-------------------------------\
| 153.42    100       43438017|\
-------------------------------\
-------------------------------\
| 153.42    100       43438142|\
-------------------------------\
-------------------------------\
| 153.42    100       43438285|\
-------------------------------\
-------------------------------\
| 153.42    100       43438573|\
-------------------------------\
-------------------------------\
| 153.42    100       43438573|\
-------------------------------\
-------------------------------\
| 153.42    200       43438577|\
-------------------------------\
-------------------------------\
| 153.42    200       43438577|\
-------------------------------\
-------------------------------\
| 153.42    100       43438577|\
-------------------------------\
-------------------------------\
| 153.42    300       43438577|\
-------------------------------\
-------------------------------\
| 153.42    300       43438577|\
-------------------------------\
-------------------------------\
| 153.42    200       43438690|\
-------------------------------\
-------------------------------\
| 153.43    100       43437859|\
-------------------------------\
-------------------------------\
| 153.43    100       43438573|\
-------------------------------\
-------------------------------\
| 153.43    100       43438576|\
-------------------------------\
-------------------------------\
| 153.43    100       43438726|\
-------------------------------\
-------------------------------\
| 153.44    500       43438578|\
-------------------------------\
-------------------------------\
| 153.44    100       43438582|\
-------------------------------\
-------------------------------\
| 153.44    100       43438582|\
-------------------------------\
-------------------------------\
| 153.44    100       43438732|\
-------------------------------\
-------------------------------\
| 153.45    700       43438285|\
-------------------------------\
-------------------------------\
| 153.45    100       43438285|\
-------------------------------\
-------------------------------\
| 153.45    400       43438577|\
-------------------------------\
-------------------------------\
| 153.45    100       43438579|\
-------------------------------\
-------------------------------\
| 153.45    100       43438581|\
-------------------------------\
-------------------------------\
| 153.45    100       43438726|\
-------------------------------\
-------------------------------\
| 153.45    100       43438732|\
-------------------------------\
-------------------------------\
| 153.46    100       43438285|\
-------------------------------\
-------------------------------\
| 153.46    600       43438577|\
-------------------------------\
-------------------------------\
| 153.46    600       43438580|\
-------------------------------\
-------------------------------\
| 153.46    100       43438586|\
-------------------------------\
-------------------------------\
| 153.47    600       43437971|\
-------------------------------\
-------------------------------\
| 153.47    100       43438284|\
-------------------------------\
-------------------------------\
| 153.47    100       43438284|\
-------------------------------\
-------------------------------\
| 153.47    100       43438285|\
-------------------------------\
-------------------------------\
| 153.47    200       43438733|\
-------------------------------\
-------------------------------\
| 153.49    500       43438575|\
-------------------------------\
-------------------------------\
| 153.49    500       43438580|\
-------------------------------\
-------------------------------\
| 153.49    500       43438591|\
-------------------------------\
-------------------------------\
| 153.49    500       43438690|\
-------------------------------\
-------------------------------\
| 153.51    100       43438573|\
-------------------------------\
-------------------------------\
| 153.51    100       43438573|\
-------------------------------\
-------------------------------\
| 153.51    100       43438574|\
-------------------------------\
-------------------------------\
| 153.51    100       43438576|\
-------------------------------\
-------------------------------\
| 153.51    100       43438576|\
-------------------------------\
-------------------------------\
| 153.51    100       43438577|\
-------------------------------\
-------------------------------\
| 153.51    100       43438690|\
-------------------------------\
-------------------------------\
| 153.51    100       43438732|\
-------------------------------\
\
\
Program ended with exit code: 0\
\
\

\f0\b0 BUY SIDE MARKET ORDER TEST: SUCCESSFUL\
\
CODE:\
\
\pard\tx543\pardeftab543\pardirnatural\partightenfactor0
\cf4 \cb3 \CocoaLigature1 int\cf2  main()\{
\f1\fs24 \cf0 \
\
\pard\tx543\pardeftab543\pardirnatural\partightenfactor0

\f0\fs22 \cf2     \cf5 ifstream\cf2  read_data(\cf6 "/Users/thomasciha/Documents/2nd Year/CS 275/IBM_Trades_N_Quotes.csv"\cf2 ); \cf7 // note: there are 1353590 lines
\f1\fs24 \cf0 \
\

\f0\fs22 \cf2     \cf5 string\cf2  line;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf8 getline\cf2 (read_data,line); \cf7 //get header, throw it out
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf4 class\cf2  \cf9 ECN\cf2  Test_ECN(\cf6 "ECN1"\cf2 );
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf7 // creating sample order to test system:
\f1\fs24 \cf0 \
\

\f0\fs22 \cf2     \cf5 hours\cf2  hrs (\cf8 stoi\cf2 (\cf6 "9"\cf2 ));
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf5 minutes\cf2  mns (\cf8 stoi\cf2 (\cf6 "45"\cf2 ));
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf5 milliseconds\cf2  ms = \cf8 duration_cast\cf2 <\cf5 milliseconds\cf2 > (hrs) + \cf8 duration_cast\cf2 <\cf5 milliseconds\cf2 >(mns);
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf5 cout\cf2  << \cf6 " ms = "\cf2  << ms.\cf8 count\cf2 () << \cf8 endl\cf2 ;
\f1\fs24 \cf0 \
\

\f0\fs22 \cf2     \cf9 Order\cf2  sample_buy(\cf10 1\cf2 ,\cf10 2\cf2 , \cf10 700\cf2 , \cf11 Stock\cf2 , \cf6 "IBM"\cf2 , ms, \cf11 Market\cf2 , \cf11 Day\cf2 , \cf11 Buy\cf2 , \cf10 0\cf2 );
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf9 Order\cf2  sample_ask(\cf10 2\cf2 ,\cf10 3\cf2 , \cf10 500\cf2 , \cf11 Stock\cf2 , \cf6 "IBM"\cf2 , \cf5 milliseconds\cf2 (\cf10 500\cf2 ), \cf11 Market\cf2 , \cf11 Day\cf2 , \cf11 Sell\cf2 , \cf10 0\cf2 );
\f1\fs24 \cf0 \
\

\f0\fs22 \cf2     \cf5 vector\cf2 <\cf4 class\cf2  \cf9 ECN\cf2  *> OMS_Initializer;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     OMS_Initializer.\cf8 push_back\cf2 (&Test_ECN);
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf9 OMS\cf2  my_broker(OMS_Initializer);
\f1\fs24 \cf0 \
\

\f0\fs22 \cf2     \cf4 int\cf2  count = \cf10 0\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf4 while\cf2 (\cf8 getline\cf2 (read_data, line))\{
\f1\fs24 \cf0 \

\f0\fs22 \cf2         \cf9 Offer\cf2  temp = \cf11 create_offer\cf2 (line);
\f1\fs24 \cf0 \

\f0\fs22 \cf2         \cf4 if\cf2 (count > \cf10 200000\cf2  && count < \cf10 200015\cf2 )
\f1\fs24 \cf0 \

\f0\fs22 \cf2             Test_ECN.\cf11 ParseOffer\cf2 (temp);
\f1\fs24 \cf0 \

\f0\fs22 \cf2         count +=\cf10 1\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \}
\f1\fs24 \cf0 \
\

\f0\fs22 \cf2     \cf5 cout\cf2  << \cf6 "CURRENT BIDS: "\cf2  << \cf8 endl\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     my_broker.\cf9 available_ECNs\cf2 [\cf10 0\cf2 ]->\cf9 market\cf2 .\cf11 Print_Offers\cf2 (\cf11 Bid\cf2 );
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf5 cout\cf2  << \cf6 "CURRENT ASKS: "\cf2  << \cf8 endl\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     my_broker.\cf9 available_ECNs\cf2 [\cf10 0\cf2 ]->\cf9 market\cf2 .\cf11 Print_Offers\cf2 (\cf11 Ask\cf2 );
\f1\fs24 \cf0 \
\

\f0\fs22 \cf2     \cf9 order_info\cf2  of = my_broker.\cf11 ProcessOrder\cf2 (sample_buy);
\f1\fs24 \cf0 \

\f0\fs22 \cf2     of.\cf11 Print\cf2 ();
\f1\fs24 \cf0 \

\f0\fs22 \cf2       
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf5 cout\cf2  << \cf6 "CURRENT BIDS: AFTER TRADE"\cf2  << \cf8 endl\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     my_broker.\cf9 available_ECNs\cf2 [\cf10 0\cf2 ]->\cf9 market\cf2 .\cf11 Print_Offers\cf2 (\cf11 Bid\cf2 );
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf5 cout\cf2  << \cf6 "CURRENT ASKS: AFTER TRADE"\cf2  << \cf8 endl\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     my_broker.\cf9 available_ECNs\cf2 [\cf10 0\cf2 ]->\cf9 market\cf2 .\cf11 Print_Offers\cf2 (\cf11 Ask\cf2 );
\f1\fs24 \cf0 \

\f0\fs22 \cf2     
\f1\fs24 \cf0 \

\f0\fs22 \cf2     read_data.\cf8 close\cf2 ();
\f1\fs24 \cf0 \

\f0\fs22 \cf2 \}
\f1\fs24 \cf0 \
\pard\tx543\pardeftab543\pardirnatural\partightenfactor0

\f0\fs22 \cf2 \cb1 \CocoaLigature0 \
\
\
OUTPUT: \
\

\f2\b CURRENT BIDS: \
-------------------------------\
| 153.84    100       37672788|\
-------------------------------\
-------------------------------\
| 153.84    100       37672788|\
-------------------------------\
-------------------------------\
| 153.84    100       37672788|\
-------------------------------\
-------------------------------\
| 153.84    100       37672788|\
-------------------------------\
-------------------------------\
| 153.84    100       37672788|\
-------------------------------\
-------------------------------\
| 153.81    200       37672789|\
-------------------------------\
-------------------------------\
| 153.59    100       37672790|\
-------------------------------\
\
\
CURRENT ASKS: \
-------------------------------\
| 153.86    200       37672788|\
-------------------------------\
-------------------------------\
| 153.86    200       37672788|\
-------------------------------\
-------------------------------\
| 153.87    100       37672788|\
-------------------------------\
-------------------------------\
| 153.87    100       37672788|\
-------------------------------\
-------------------------------\
| 153.87    100       37672788|\
-------------------------------\
-------------------------------\
| 153.88    100       37672789|\
-------------------------------\
-------------------------------\
| 153.9    100       37672788|\
-------------------------------\
\
\
Avg Price: 153.864\
Shares Filled: 700\
Order Status: Filled\
\
CURRENT BIDS: AFTER TRADE\
-------------------------------\
| 153.84    100       37672788|\
-------------------------------\
-------------------------------\
| 153.84    100       37672788|\
-------------------------------\
-------------------------------\
| 153.84    100       37672788|\
-------------------------------\
-------------------------------\
| 153.84    100       37672788|\
-------------------------------\
-------------------------------\
| 153.84    100       37672788|\
-------------------------------\
-------------------------------\
| 153.81    200       37672789|\
-------------------------------\
-------------------------------\
| 153.59    100       37672790|\
-------------------------------\
\
\
CURRENT ASKS: AFTER TRADE\
-------------------------------\
| 153.88    100       37672789|\
-------------------------------\
-------------------------------\
| 153.9    100       37672788|\
-------------------------------\
\
\
Program ended with exit code: 0\
\
\
\

\f0\b0 SELL SIDE LIMIT ORDER TEST: SUCCESSFUL \
\
- this illustrates a limit order filling partially and returning the order info with the correct status of \'91Pending\'92\
\
CODE:\
\
\pard\tx543\pardeftab543\pardirnatural\partightenfactor0
\cf4 \cb3 \CocoaLigature1 int\cf2  main()\{
\f1\fs24 \cf0 \
\
\pard\tx543\pardeftab543\pardirnatural\partightenfactor0

\f0\fs22 \cf2     \cf5 ifstream\cf2  read_data(\cf6 "/Users/thomasciha/Documents/2nd Year/CS 275/IBM_Trades_N_Quotes.csv"\cf2 ); \cf7 // note: there are 1353590 lines
\f1\fs24 \cf0 \
\

\f0\fs22 \cf2     \cf5 string\cf2  line;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf8 getline\cf2 (read_data,line); \cf7 //get header, throw it out
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf4 class\cf2  \cf9 ECN\cf2  Test_ECN(\cf6 "ECN1"\cf2 );
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf7 // creating sample order to test system:
\f1\fs24 \cf0 \
\

\f0\fs22 \cf2     \cf5 hours\cf2  hrs (\cf8 stoi\cf2 (\cf6 "9"\cf2 ));
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf5 minutes\cf2  mns (\cf8 stoi\cf2 (\cf6 "45"\cf2 ));
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf5 milliseconds\cf2  ms = \cf8 duration_cast\cf2 <\cf5 milliseconds\cf2 > (hrs) + \cf8 duration_cast\cf2 <\cf5 milliseconds\cf2 >(mns);
\f1\fs24 \cf0 \
\

\f0\fs22 \cf2     \cf9 Order\cf2  sample_buy(\cf10 1\cf2 ,\cf10 2\cf2 , \cf10 700\cf2 , \cf11 Stock\cf2 , \cf6 "IBM"\cf2 , ms, \cf11 Market\cf2 , \cf11 Day\cf2 , \cf11 Buy\cf2 , \cf10 0\cf2 );
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf9 Order\cf2  sample_ask(\cf10 2\cf2 ,\cf10 3\cf2 , \cf10 5750\cf2 , \cf11 Stock\cf2 , \cf6 "IBM"\cf2 , \cf5 milliseconds\cf2 (\cf10 500\cf2 ), \cf11 Limit\cf2 , \cf11 Day\cf2 , \cf11 Sell\cf2 , \cf10 153.80\cf2 );
\f1\fs24 \cf0 \
\

\f0\fs22 \cf2     \cf5 vector\cf2 <\cf4 class\cf2  \cf9 ECN\cf2  *> OMS_Initializer;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     OMS_Initializer.\cf8 push_back\cf2 (&Test_ECN);
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf9 OMS\cf2  my_broker(OMS_Initializer);
\f1\fs24 \cf0 \
\

\f0\fs22 \cf2     \cf4 int\cf2  count = \cf10 0\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf4 while\cf2 (\cf8 getline\cf2 (read_data, line))\{
\f1\fs24 \cf0 \

\f0\fs22 \cf2         \cf9 Offer\cf2  temp = \cf11 create_offer\cf2 (line);
\f1\fs24 \cf0 \

\f0\fs22 \cf2         \cf4 if\cf2 (count > \cf10 200000\cf2  && count < \cf10 200015\cf2 )
\f1\fs24 \cf0 \

\f0\fs22 \cf2             Test_ECN.\cf11 ParseOffer\cf2 (temp);
\f1\fs24 \cf0 \

\f0\fs22 \cf2         count +=\cf10 1\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \}
\f1\fs24 \cf0 \
\

\f0\fs22 \cf2     \cf5 cout\cf2  << \cf6 "CURRENT BIDS: "\cf2  << \cf8 endl\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     my_broker.\cf9 available_ECNs\cf2 [\cf10 0\cf2 ]->\cf9 market\cf2 .\cf11 Print_Offers\cf2 (\cf11 Bid\cf2 );
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf5 cout\cf2  << \cf6 "CURRENT ASKS: "\cf2  << \cf8 endl\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     my_broker.\cf9 available_ECNs\cf2 [\cf10 0\cf2 ]->\cf9 market\cf2 .\cf11 Print_Offers\cf2 (\cf11 Ask\cf2 );
\f1\fs24 \cf0 \
\

\f0\fs22 \cf2     \cf9 order_info\cf2  of = my_broker.\cf11 ProcessOrder\cf2 (sample_ask);
\f1\fs24 \cf0 \

\f0\fs22 \cf2     of.\cf11 Print\cf2 ();
\f1\fs24 \cf0 \

\f0\fs22 \cf2   
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf5 cout\cf2  << my_broker.\cf9 available_ECNs\cf2 [\cf10 0\cf2 ]->\cf9 market\cf2 .\cf9 current_asks\cf2 .\cf8 empty\cf2 () << \cf8 endl\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf5 cout\cf2  << \cf6 "CURRENT BIDS: AFTER TRADE"\cf2  << \cf8 endl\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     my_broker.\cf9 available_ECNs\cf2 [\cf10 0\cf2 ]->\cf9 market\cf2 .\cf11 Print_Offers\cf2 (\cf11 Bid\cf2 );
\f1\fs24 \cf0 \

\f0\fs22 \cf2     \cf5 cout\cf2  << \cf6 "CURRENT ASKS: AFTER TRADE"\cf2  << \cf8 endl\cf2 ;
\f1\fs24 \cf0 \

\f0\fs22 \cf2     my_broker.\cf9 available_ECNs\cf2 [\cf10 0\cf2 ]->\cf9 market\cf2 .\cf11 Print_Offers\cf2 (\cf11 Ask\cf2 );
\f1\fs24 \cf0 \

\f0\fs22 \cf2     
\f1\fs24 \cf0 \

\f0\fs22 \cf2     read_data.\cf8 close\cf2 ();
\f1\fs24 \cf0 \

\f0\fs22 \cf2 \}\cb1 \CocoaLigature0 \
\
\
\
OUTPUT:\
\
\pard\tx543\pardeftab543\pardirnatural\partightenfactor0

\f2\b \cf2 CURRENT BIDS: \
-------------------------------\
| 153.84    100       37672788|\
-------------------------------\
-------------------------------\
| 153.84    100       37672788|\
-------------------------------\
-------------------------------\
| 153.84    100       37672788|\
-------------------------------\
-------------------------------\
| 153.84    100       37672788|\
-------------------------------\
-------------------------------\
| 153.84    100       37672788|\
-------------------------------\
-------------------------------\
| 153.81    200       37672789|\
-------------------------------\
-------------------------------\
| 153.59    100       37672790|\
-------------------------------\
\
\
CURRENT ASKS: \
-------------------------------\
| 153.86    200       37672788|\
-------------------------------\
-------------------------------\
| 153.86    200       37672788|\
-------------------------------\
-------------------------------\
| 153.87    100       37672788|\
-------------------------------\
-------------------------------\
| 153.87    100       37672788|\
-------------------------------\
-------------------------------\
| 153.87    100       37672788|\
-------------------------------\
-------------------------------\
| 153.88    100       37672789|\
-------------------------------\
-------------------------------\
| 153.9    100       37672788|\
-------------------------------\
\
\
Avg Price: 153.831\
Shares Filled: 700\
Order Status: Pending\
\
CURRENT BIDS: AFTER TRADE\
-------------------------------\
| 153.59    100       37672790|\
-------------------------------\
\
\
CURRENT ASKS: AFTER TRADE\
-------------------------------\
| 153.8   5050            500|\
-------------------------------\
-------------------------------\
| 153.86    200       37672788|\
-------------------------------\
-------------------------------\
| 153.86    200       37672788|\
-------------------------------\
-------------------------------\
| 153.87    100       37672788|\
-------------------------------\
-------------------------------\
| 153.87    100       37672788|\
-------------------------------\
-------------------------------\
| 153.87    100       37672788|\
-------------------------------\
-------------------------------\
| 153.88    100       37672789|\
-------------------------------\
-------------------------------\
| 153.9    100       37672788|\
-------------------------------\
\
\
Program ended with exit code: 0\
}